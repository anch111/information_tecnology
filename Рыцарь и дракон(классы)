import random
from random import randint

from plot import hero_name


class Character:
    def __init__(self, name=str, hp=int, attack=int, crit_attack = int):
        self.crit_attack = crit_attack
        self.attack = attack
        self.hp = hp
        self.name = name

    def fight(self, other):
        check_food = 0
        while other.hp > 0 and self.hp > 0:
            print(f'{self.name} –∞—Ç–∞—Ç–∫—É–µ—Ç {other.name}.\n'
                  f'[–ù–∞–∂–º–∏ Enter, —á—Ç–æ–±—ã –±—Ä–æ—Å–∏—Ç—å –∫–æ—Å—Ç–∏...]')
            input('Ô∏èüé≤')
            hod = randint(1, 6)
            print(f'–í—ã–ø–∞–≤—à–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: {hod}.')

            if hod > 4:
                print(f'{self.name} –Ω–∞–Ω–æ—Å–∏—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä.')
                other.hp -= self.crit_attack
            else:
                print(f'{self.name} –Ω–∞–Ω–æ—Å–∏—Ç —É–¥–∞—Ä.')
                other.hp -= self.attack

            if other.hp <= 0:
                print(f'{other.name} –ø–æ—Ä–∞–∂–µ–Ω.')
                break
            else:
                print('–ë–∏—Ç–≤–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è...')
                input('üõ°Ô∏èüó°Ô∏è')
            if self.hp <= 0:
                print(f'{self.name} –ø–æ—Ä–∞–∂–µ–Ω.')
                break
            if check_food == 0:
                Knight.check_hp(player)
                check_food += 1
            print(f'{self.name}. –û—Å—Ç–∞–ª–æ—Å—å {self.hp} –µ–¥–∏–Ω–∏—Ü –∑–¥–æ—Ä–æ–≤—å—è.')
            print(f'{other.name}. –û—Å—Ç–∞–ª–æ—Å—å {other.hp} –µ–¥–∏–Ω–∏—Ü –∑–¥–æ—Ä–æ–≤—å—è.')

            Character.fight(other, self)


class Knight(Character):
    def __init__(self, name, hp, attack, crit_attack):
        super().__init__(name, hp, attack, crit_attack)
        self.inventiry = 'food'

    def attack_up(self):
        self.attack += 50

    def food(self):
        self.hp = 600

    def inventory_check(self):
        if self.inventiry == 'food':
            self.food()
            queat = input('–°—ä–µ—Å—Ç—å —Å—É—Ö–∞—Ä—å –∏ –≤–æ—Å–ø–æ–ª–Ω–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ?')
            if queat.lower() == '–¥–∞':
                print('–í—ã —Å—ä–µ–ª–∏ —Å—É—Ö–∞—Ä—å. –í–∞—à–µ –∑–¥–æ—Ä–æ–≤—å–µ –≤–æ—Å–ø–æ–ª–Ω–µ–Ω–æ.')
                self.inventiry = ''
        else:
            print("–ö–∞–∂–µ—Ç—Å—è, –∫–∞—Ä–º–∞–Ω –ø—É—Å—Ç.")

    def food_out(self):
        self.inventiry = ''

    def check_hp(self):
        if self.hp <= 300:
            print('–ö–∞–∂–µ—Ç—Å—è, —É –≤–∞—Å –≤ –∫–∞—Ä–º–∞–Ω–µ –±—ã–ª–æ —á—Ç–æ-—Ç–æ, —á—Ç–æ –º–æ–≥–ª–æ –±—ã —Å–µ–π—á–∞—Å –æ—á–µ–Ω—å –ø—Ä–∏–≥–æ–¥–∏—Ç—å—Å—è...')
            Knight.inventory_check(self)

    def low_hp_check(self):
        if self.hp <= 0:
            return True
        return False

class Dragon(Character):
    def __init__(self, name, hp, attack, crit_attack):
        super().__init__(name, hp, attack, crit_attack)

    def attack_down(self):
        self.attack -= 25

    def crit_attack_down(self):
        self.attack -= 50

class Magician(Character):
    def __init__(self, name, hp, attack, crit_attack):
        super().__init__(name, hp, attack, crit_attack)


player = Knight(hero_name, 600, 100, 300)
dragon = Dragon('–î—Ä–∞–∫–æ–Ω', 1000, 150, 450)
magician = Magician('–ú–∞–≥', 700, 125, 400)



